{% extends 'layout.html' %}

{% block content %}
<div class="bg-white p-6 md:p-8 rounded-lg shadow-md max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold text-gray-700 mb-6">{{ 'Edit Rincian ODP' if action == 'edit' else 'Tambah Rincian ODP' }}</h2>
    <form method="post" class="space-y-6">
        <div>
            <label for="id_fat" class="block text-sm font-medium text-gray-700">Pilih Area (FAT)</label>
            <select id="id_fat" name="id_fat" class="select2-class w-full" required>
                <option value="">-- Pilih Area --</option>
                {% for fat in fats %}
                <option value="{{ fat.id_fat }}" {% if rincian and rincian.id_fat == fat.id_fat %}selected{% endif %}>{{ fat.nama_fat }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div>
            <label for="id_olt" class="block text-sm font-medium text-gray-700">Pilih OLT</label>
            <select id="id_olt" name="id_olt" class="select2-class w-full" required>
                <option value="">-- Pilih OLT --</option>
                {% for olt in olts %}
                <option value="{{ olt.id_olt }}" {% if rincian and rincian.id_olt == olt.id_olt %}selected{% endif %}>{{ olt.nama_olt }} | {{olt.pon_olt}}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for="id_odc" class="block text-sm font-medium text-gray-700">Pilih ODC</label>
            <select id="id_odc" name="id_odc" class="select2-class w-full" required>
                <option value="">-- Pilih ODC --</option>
                {% for odc in odcs %}
                <option value="{{ odc.id_odc }}" {% if rincian and rincian.id_odc == odc.id_odc %}selected{% endif %}>{{ odc.nama_odc }} | {{odc.port_odc}}</option>
                {% endfor %}
            </select>
        </div>

        <div>
            <label for="id_odp" class="block text-sm font-medium text-gray-700">Pilih ODP</label>
            <select id="id_odp" name="id_odp" class="select2-class w-full" required>
                <option value="">-- Pilih ODP --</option>
                {% for odp in odps %}
                <option value="{{ odp.id_odp }}" {% if rincian and rincian.id_odp == odp.id_odp %}selected{% endif %}>{{ odp.nama_odp }}</option>
                {% endfor %}
            </select>
        </div>
        
        <div>
            <label for="warna_kabel" class="block text-sm font-medium text-gray-700">Warna Kabel</label>
            <input type="text" id="warna_kabel" name="warna_kabel" value="{{ rincian.warna_kabel if rincian else '' }}"
                   class="mt-1 block w-full h-10 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
        </div>

        <div class="flex items-center justify-end space-x-4 pt-4">
            <a href="{{ url_for('rincian_odp_list') }}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded">Batal</a>
            <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                {{ 'Update' if action == 'edit' else 'Simpan' }}
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Inisialisasi Select2 pada semua elemen dengan kelas 'select2-class'
    $(document).ready(function() {
        $('.select2-class').select2();
    });
</script>
{% endblock %}